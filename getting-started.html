

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Getting Started with CODAL &#8212; CODAL Documentation v0.2.49-4-g300bcb4</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/bootstrap-treeview/bootstrap-treeview.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script src="_static/bootstrap-treeview/bootstrap-treeview.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'getting-started';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="The uBit Object" href="ubit/index.html" />
    <link rel="prev" title="CODAL Documentation" href="index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>


  <div class="bd-header-announcement container-fluid bd-header-announcement">
    <div class="bd-header-announcement__content">We're currently porting the DAL documentation over to CODAL. The information on here may be outdated or incorrect!</div>
  </div>

  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    <p class="title logo__title">CODAL Documentation v0.2.49-4-g300bcb4</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="index.html">
                    CODAL Documentation
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Getting Started with CODAL</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="ubit/index.html">The uBit Object</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="ubit/buttons.html">Buttons and Touch Input</a></li>
<li class="toctree-l2"><a class="reference internal" href="ubit/edge-connector.html">Edge Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="ubit/accelerometer.html">uBit.accelerometer</a></li>
<li class="toctree-l2"><a class="reference internal" href="ubit/audio.html">uBit.audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="ubit/compass.html">uBit.compass</a></li>
<li class="toctree-l2"><a class="reference internal" href="ubit/display.html">uBit.display</a></li>
<li class="toctree-l2"><a class="reference internal" href="ubit/serial.html">uBit.serial</a></li>
<li class="toctree-l2"><a class="reference internal" href="ubit/storage.html">uBit.storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="ubit/thermometer.html">uBit.thermometer</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="memory-and-storage/index.html">Memory and Storage</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="memory-and-storage/managedstring.html">ManagedString</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory-and-storage/packetbuffer.html">PacketBuffer</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory-and-storage/microbitimage.html">MicroBitImage</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="guides/index.html">Guides</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="guides/prerequisites.html">Installation - Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="guides/codal-projects.html">CODAL Projects</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="projects/index.html">Projects</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="projects/disco-lights.html">Disco Lights</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="codal-api.html">The Complete CODAL API</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary of Terms</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/lancaster-university/codal-documentation" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Getting Started with CODAL</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-codal">What is CODAL?</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-a-device-abstraction">What is a device abstraction?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-a-component">What is a “Component”?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#c-for-the-micro-bit">C++ for the micro:bit</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#concurrency">Concurrency</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#events">Events</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-events">Creating Events</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#detecting-events">Detecting Events</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#build-tools">Build Tools</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#projects-and-guides">Projects and Guides</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#holding-zone-temp">Holding Zone (Temp)</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="getting-started-with-codal">
<h1><a class="toc-backref" href="#id7" role="doc-backlink">Getting Started with CODAL</a><a class="headerlink" href="#getting-started-with-codal" title="Permalink to this heading">#</a></h1>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#getting-started-with-codal" id="id7">Getting Started with CODAL</a></p>
<ul>
<li><p><a class="reference internal" href="#what-is-codal" id="id8">What is CODAL?</a></p>
<ul>
<li><p><a class="reference internal" href="#what-is-a-device-abstraction" id="id9">What is a device abstraction?</a></p></li>
<li><p><a class="reference internal" href="#what-is-a-component" id="id10">What is a “Component”?</a></p></li>
<li><p><a class="reference internal" href="#c-for-the-micro-bit" id="id11">C++ for the micro:bit</a></p>
<ul>
<li><p><a class="reference internal" href="#concurrency" id="id12">Concurrency</a></p></li>
<li><p><a class="reference internal" href="#events" id="id13">Events</a></p>
<ul>
<li><p><a class="reference internal" href="#creating-events" id="id14">Creating Events</a></p></li>
<li><p><a class="reference internal" href="#detecting-events" id="id15">Detecting Events</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#build-tools" id="id16">Build Tools</a></p></li>
<li><p><a class="reference internal" href="#projects-and-guides" id="id17">Projects and Guides</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#holding-zone-temp" id="id18">Holding Zone (Temp)</a></p></li>
</ul>
</li>
</ul>
</nav>
<p>To start developing in C++ with CODAL and the Micro:bit you’ll first need to ensure that you have followed the steps in <a class="reference internal" href="guides/prerequisites.html"><span class="doc">Installation - Tools</span></a> for
your operating system, and that you have a new project set up by following the steps in <a class="reference internal" href="guides/codal-projects.html"><span class="doc">CODAL Projects</span></a></p>
<section id="what-is-codal">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">What is CODAL?</a><a class="headerlink" href="#what-is-codal" title="Permalink to this heading">#</a></h2>
<p>CODAL is the <cite>Component Oriented Device Abstraction Layer</cite> and is the set of controls through which you drive the micro:bit v2 devices (and friends!).
It sits in the slightly fuzzy zone between an Application Programming Interface (API) and an Operating System (OS) and shares some functions with both.</p>
<p>Traditional operating systems, such as those you would find on your compter, tablet, phone, and other devices run the show and present a nicely isolated
way for programs to interact with the user, hiding the complexity of running the system itself.
Programs run in a sort of fantasy world, where they own all the hardware and can do whatever they like with it (within reason) but in reality the OS is
hiding everything from them (except through special methods).</p>
<p>By contrast, a pure API would simply be a library which is compiled in with the applications themselves and becomes a part of the application during run
time.
Often these would then use OS methods to actually perform any useful task (although purely application-level APIs do exist in abundance!)</p>
<section id="what-is-a-device-abstraction">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">What is a device abstraction?</a><a class="headerlink" href="#what-is-a-device-abstraction" title="Permalink to this heading">#</a></h3>
<p>Rather than having to write code for each and every specific device, it is often useful to hide the complexity of the actual device specifics
by wrapping or ‘layering’ it under a much more simple interface.
CODAL does this for most (if not all) of its devices, allowing programs written for one target, such as the micro:bit v2, also execute on other
CODAL-running platforms.</p>
<p>In general, this means that developers are presented with a set of functions, methods and classes which describe the functional operation of a device
rather than the required steps to actually realise these functions.
An extremely common case for this would be initialisation code; whereby from the application developers perspective, the device comes pre-initialised
and ready to go, but under this layer, the CODAL component (or components, for exceptionally complex hardware) are actually configuring the serial busses,
memory mappings, and maintenance tasks required to make this possible, all without the developer having to know.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Naturally, if a developer is porting CODAL to a new platform, they are much more likely to encounter the lower level parts of the system, but for just
using CODAL, development is simplified.</p>
</div>
<figure class="align-center" id="id6">
<img alt="static/missing-image.jpg" src="static/missing-image.jpg" />
<figcaption>
<p><span class="caption-text">The micro:bit v2 CODAL architecture, as a set of conceptual layers</span><a class="headerlink" href="#id6" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Device ‘drivers’ are therefore composed of two parts; one which does the heavy lifting on the device to actually run the hardware, and another which presents
this device or class of devices to the application developer.
One good example of this is the <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">codal::Serial</span></code> class, as it neatly hides if this is a hardware-backed serial device (with hardware-based buffering and
management circuitry) or if this is a software-based serial device, handled entirely within CODAL itself; or indeed, if this is a more exotic serial device, such
as the one we use for communication with a computer through the KL27 (See <span class="xref std std-doc">/hardware/kl27</span> for info on the KL27) over our internal I2C connection, or the
line-based serial link in the Field Testing library for NMEA uBlox GPS devices (See <span class="xref std std-doc">/libraries/codal-field-testing.rst</span>).</p>
</section>
<section id="what-is-a-component">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">What is a “Component”?</a><a class="headerlink" href="#what-is-a-component" title="Permalink to this heading">#</a></h3>
<p>Components in CODAL devide up specific blocks of functionality, and these informally take on one or more of the following three aspects:</p>
<dl class="simple">
<dt>Device Drivers</dt><dd><p>Whereby the function is that of configuring, running and responding to events for a specific piece of hardware.</p>
</dd>
<dt>Function Abstraction</dt><dd><p>These</p>
</dd>
<dt>Utility-based Grouping</dt><dd><p>These components group together a set of co-useful functions such that developers have all the relevant tools within a handful of objects or classes.
This is the most pragmatic form of Component, whereby the decisions for what compose these groupings</p>
</dd>
</dl>
<p>This might take the form of a <cite>device driver</cite>, whereby the function is that of running a piece of hardware, or may be a more logical seperation of function, such
as splitting or mixing audio.</p>
<ul class="simple">
<li><dl class="simple">
<dt>Bounded areas of function</dt><dd><ul>
<li><p>A pragramatic approach</p></li>
<li><p>Where do C++ classes and objects fit in?</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="c-for-the-micro-bit">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">C++ for the micro:bit</a><a class="headerlink" href="#c-for-the-micro-bit" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt>The ubit Object as an API</dt><dd><ul>
<li><p>Reference diagram</p></li>
<li><p>List of common components</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Example minimal working app</p></li>
<li><dl class="simple">
<dt>Programming model</dt><dd><ul>
<li><p>Sync vs. Async calls</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<section id="concurrency">
<h4><a class="toc-backref" href="#id12" role="doc-backlink">Concurrency</a><a class="headerlink" href="#concurrency" title="Permalink to this heading">#</a></h4>
<p>It is not uncommon to want to write programs that can do more than one thing at a time. For example, it takes quite a long time to scroll a message over the LED
matrix, so what if you want your program to do something else while this is happening?</p>
<p>Programs that do more than one thing at a time are called concurrent programs.</p>
<p>The runtime provides two ways you can achieve concurrency in your programs:</p>
<ul class="simple">
<li><p>Functions that may take a very long time to complete (e.g. <a href="#id1"><span class="problematic" id="id2">:method:`codal::AnimatedDisplay.scroll`</span></a>) often have “Async” versions
(e.g. <a href="#id3"><span class="problematic" id="id4">:method:`codal::AnimatedDisplay.scrollAsync`</span></a>).
These functions have the exact same behaviour as their counterparts, but don’t wait for the effect to finish before allowing the user’s program to continue.
Instead, as soon as the function is called, the user’s program carries on executing (and can go an do something else while the task is running in the background).</p></li>
<li><p>Users can also make use of the runtime fiber scheduler. This lets you run parts of your program in the background, and share the processor on your micro:bit
between those parts as they need it.
In fact, whenever you write an event handler, the runtime will normally execute your handler in the background in this way, so that it reduces the impact on the
rest of your program!
The scheduler is a type of non-preemptive scheduler. This means that the runtime will never take control away from your program - it will wait for it to make a
call to a runtime function that is blocking.
All the functions that are blocking are listed as such in their documentation. You can create fibers at any time.</p></li>
</ul>
</section>
<section id="events">
<h4><a class="toc-backref" href="#id13" role="doc-backlink">Events</a><a class="headerlink" href="#events" title="Permalink to this heading">#</a></h4>
<p>Computer programs execute sequentially - one line after another, following the logic of the program you have written. Sometimes though, we want to be able to determine
when something has happened, and write some code to decide what should happen in that case. For example, maybe you want to know when a button has been pressed, when
your micro:bit has been shaken, or when some data has been sent to you over the micro:bit radio. For these sorts of cases, we create a MicroBitEvent.</p>
<section id="creating-events">
<h5><a class="toc-backref" href="#id14" role="doc-backlink">Creating Events</a><a class="headerlink" href="#creating-events" title="Permalink to this heading">#</a></h5>
<p>Many components will raise events when interesting things occur. For example, ‘MicroBitAccelerometer’ will raise events to indicate that the micro:bit has be been shaken,
or is in freefall and ‘MicroBitButton’ will send events on a range of button up, down, click and hold events. Programmers are also free to send their own events whenever
they feel it would be useful. MicroBitEvents are very simple, and consist of only two numbers:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">source</span></code> - A number identifying the component that created the event.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">value</span></code> - A number unique to the source that identifies the event.</p></li>
</ul>
<p>The documentation for each component defines its event source, and all the events it may generate, and also gives a name to these event values. For example, take a look
at the button documentation to see that the source MICROBIT_ID_BUTTON_A has the value ‘1’, and an event MICROBIT_BUTTON_EVT_CLICK with the value ‘3’ is generated when a
button is clicked.</p>
<p>Creating an event is easy - just create a MicroBitEvent with the source and value you need, and the runtime takes care of the rest:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">MicroBitEvent</span><span class="p">(</span><span class="n">MICROBIT_ID_BUTTON_A</span><span class="p">,</span><span class="w"> </span><span class="n">MICROBIT_BUTTON_EVT_CLICK</span><span class="p">);</span>
</pre></div>
</div>
<p>Feel free to create your own events lke this too. Just try to avoid using any source ID that is already used by the runtime! :-) See the messageBus page for a complete
table of the reserved source IDs.</p>
</section>
<section id="detecting-events">
<h5><a class="toc-backref" href="#id15" role="doc-backlink">Detecting Events</a><a class="headerlink" href="#detecting-events" title="Permalink to this heading">#</a></h5>
<p>The micro:bit runtime has a component called the MicroBitMessageBus, and its job is remember which events your program is interested in, and to deliver MicroBitEvents to
your program as they occur.</p>
<p>To find out when an event happens, you need to create a function in your program, then tell the message bus which event you want to attach this function to. This is known
as writing an event handler.</p>
<p>You write an event handler through the MicroBitMessageBus listen function.</p>
<div class="admonition-todo admonition" id="id5">
<p class="admonition-title">Todo</p>
<p>Needs a set of examples here. Also some mention of dynamic component IDs under some kind of ‘advanced topics’ section.</p>
</div>
<ul class="simple">
<li><dl class="simple">
<dt>Thread / Fiber model</dt><dd><ul>
<li><p>Cooperative multi-tasking</p></li>
<li><dl class="simple">
<dt>Events, IDs and Messages</dt><dd><ul>
<li><p>Handles and Callbacks</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>C-like C++ coding style</dt><dd><ul>
<li><p>Reference to Arduino</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Memory and Storage</dt><dd><ul>
<li><p>Heap vs Stack</p></li>
<li><p>Managed objects
- Strings <a class="reference internal" href="memory-and-storage/managedstring.html"><span class="doc">ManagedString</span></a></p></li>
<li><p>Key/value Storage</p></li>
<li><p>micro:bit virtual disk</p></li>
<li><p>Persistent storage options</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
</section>
</section>
<section id="build-tools">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">Build Tools</a><a class="headerlink" href="#build-tools" title="Permalink to this heading">#</a></h3>
<p>Under ‘the hood’, CODAL uses <a class="reference external" href="https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/downloads">arm-gcc</a> to compile source code into the binary we write to the board, and this compiler suite is driven by <cite>GNU make_</cite> from makefiles
created by <a class="reference external" href="https://cmake.org/">CMake</a>.
However, the developer interface to this (and many other functions) is <cite>build.py</cite>, which is a <a class="reference external" href="https://www.python.org/">Python</a> script designed to launch CMake and other tools for you, greatly
simplifying the build, deployment and management of your CODAL projects.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The build script <cite>build.py</cite> may be replaced by an updated <cite>codal.py</cite> script in the future, as there are plans to merge <a class="reference external" href="https://github.com/lancaster-university/codal-bootstrap">codal-bootstrap</a> into the main <cite>codal</cite> repository,
to provide developers with a more streamlined build system, and an easy way to update local tooling with updates from The Foundation.
While the timeline for this is not yet fixed, the changes from a developers perspective should be minimal, as <cite>codal.py</cite> is intended to replicate the functions and features
available currently in <cite>build.py</cite>, and will just require some slight alterations in workflows to migrate.</p>
</div>
<ul class="simple">
<li><p>CMake, python, make, etc. [x]</p></li>
<li><dl class="simple">
<dt>build.py or codal.py [x]</dt><dd><ul>
<li><p>List of useful flags and options [x]</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Libraries and project structure</dt><dd><ul>
<li><p>Custom extra targets</p></li>
<li><p>Custom user libraries</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Running applications on real hardware</dt><dd><ul>
<li><p>Flashing code to a board</p></li>
<li><p>Debugging via pyOCD or OpenOCD</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Build configurations</dt><dd><ul>
<li><p>codal.json</p></li>
<li><p>target.json</p></li>
<li><p>Set/Unset syntax for <cite>config{}</cite> blocks</p></li>
<li><dl class="simple">
<dt>Common/known config variables</dt><dd><ul>
<li><dl class="simple">
<dt>Examples for common cases</dt><dd><ul>
<li><p>DMESG settings</p></li>
<li><p>Flash erase settings</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>The Edge Connector</dt><dd><ul>
<li><dl class="simple">
<dt>GPIO access via the uBit object</dt><dd><ul>
<li><p>Digital / Analog / PWM</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Serial Communication</dt><dd><ul>
<li><p>UART / Serial -&gt; Software vs. Hardware</p></li>
<li><p>SPI</p></li>
<li><dl class="simple">
<dt>I2C -&gt; Internal vs External busses</dt><dd><ul>
<li><p>On-board devices</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>The Radio</dt><dd><ul>
<li><p>2.4Ghz packet radio -&gt; protocol options</p></li>
<li><p>Bluetooth radio</p></li>
<li><p>BLE bluetooth mode</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="projects-and-guides">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Projects and Guides</a><a class="headerlink" href="#projects-and-guides" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>“Disco Lights” -&gt; audio pipeline and display</p></li>
<li><p>“Hot Potato” -&gt; accelerometer, timers and audio</p></li>
<li><p>“Alien Scanner” -&gt; radio, display, buttons, audio</p></li>
</ul>
</section>
</section>
<section id="holding-zone-temp">
<h2><a class="toc-backref" href="#id18" role="doc-backlink">Holding Zone (Temp)</a><a class="headerlink" href="#holding-zone-temp" title="Permalink to this heading">#</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;MicroBit.h&quot;</span>

<span class="c1">// The Micro:bit control object</span>
<span class="n">MicroBit</span><span class="w"> </span><span class="n">uBit</span><span class="p">;</span>

<span class="c1">// Our main function, run at startup</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Set up the uBit object (needs only to be done once on startup)</span>
<span class="w">    </span><span class="n">uBit</span><span class="p">.</span><span class="n">init</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// Scroll some text on the display</span>
<span class="w">    </span><span class="n">uBit</span><span class="p">.</span><span class="n">display</span><span class="p">.</span><span class="n">scroll</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Hello, World!&quot;</span><span class="w"> </span><span class="p">);</span>

<span class="w">    </span><span class="c1">// By calling this we allow CODAL to continue to run when we&#39;ve exited</span>
<span class="w">    </span><span class="n">release_fiber</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>


                </article>
              

              
              
                <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">CODAL Documentation</p>
      </div>
    </a>
    <a class="right-next"
       href="ubit/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">The uBit Object</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-codal">What is CODAL?</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-a-device-abstraction">What is a device abstraction?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-a-component">What is a “Component”?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#c-for-the-micro-bit">C++ for the micro:bit</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#concurrency">Concurrency</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#events">Events</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-events">Creating Events</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#detecting-events">Detecting Events</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#build-tools">Build Tools</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#projects-and-guides">Projects and Guides</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#holding-zone-temp">Holding Zone (Temp)</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            <div class="bd-footer-content__inner">
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By John Vidler
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023, John Vidler.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div></div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>